var Zepto=(function(){var i,n,K,a,E=[],k=E.slice,e=window.document,D={},F={},l=e.defaultView.getComputedStyle,N={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},r=/^\s*<(\w+)[^>]*>/,y=[1,9,11],s=["after","prepend","before","append"],o=e.createElement("table"),G=e.createElement("tr"),g={tr:e.createElement("tbody"),tbody:o,thead:o,tfoot:o,td:G,th:G,"*":e.createElement("div")},p=/complete|loaded|interactive/,B=/^\.([\w-]+)$/,q=/^#([\w-]+)$/,C=/^[\w-]+$/;function x(O){return({}).toString.call(O)=="[object Function]"}function u(O){return O instanceof Object}function A(O){return O instanceof Array}function v(O){return typeof O.length=="number"}function M(O){return O.filter(function(P){return P!==i&&P!==null})}function w(O){return O.length>0?[].concat.apply([],O):O}function L(O){return O.replace(/-+(.)?/g,function(P,Q){return Q?Q.toUpperCase():""})}function j(O){return O.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function H(O){return O.filter(function(Q,P,R){return R.indexOf(Q)==P})}function I(O){return O in F?F[O]:(F[O]=new RegExp("(^|\\s)"+O+"(\\s|$)"))}function f(O,P){return(typeof P=="number"&&!N[j(O)])?P+"px":P}function J(Q){var O,P;if(!D[Q]){O=e.createElement(Q);e.body.appendChild(O);P=l(O,"").getPropertyValue("display");O.parentNode.removeChild(O);P=="none"&&(P="block");D[Q]=P}return D[Q]}function d(Q,P){if(P===i){P=r.test(Q)&&RegExp.$1}if(!(P in g)){P="*"}var O=g[P];O.innerHTML=""+Q;return k.call(O.childNodes)}function b(P,O){P=P||E;P.__proto__=b.prototype;P.selector=O||"";return P}function z(O,P){if(!O){return b()}if(P!==i){return z(P).find(O)}else{if(x(O)){return z(e).ready(O)}else{if(O instanceof b){return O}else{var Q;if(A(O)){Q=M(O)}else{if(y.indexOf(O.nodeType)>=0||O===window){Q=[O],O=null}else{if(r.test(O)){Q=d(O.trim(),RegExp.$1),O=null}else{if(O.nodeType&&O.nodeType==3){Q=[O]}else{Q=K(e,O)}}}}return b(Q,O)}}}}z.extend=function(O){k.call(arguments,1).forEach(function(P){for(n in P){O[n]=P[n]}});return O};z.qsa=K=function(P,O){var Q;return(P===e&&q.test(O))?((Q=P.getElementById(RegExp.$1))?[Q]:E):k.call(B.test(O)?P.getElementsByClassName(RegExp.$1):C.test(O)?P.getElementsByTagName(O):P.querySelectorAll(O))};function t(P,O){return O===i?z(P):z(P).filter(O)}function m(Q,P,O,R){return x(P)?P.call(Q,O,R):P}z.isFunction=x;z.isObject=u;z.isArray=A;z.map=function(S,T){var R,O=[],Q,P;if(v(S)){for(Q=0;Q<S.length;Q++){R=T(S[Q],Q);if(R!=null){O.push(R)}}}else{for(P in S){R=T(S[P],P);if(R!=null){O.push(R)}}}return w(O)};z.each=function(Q,R){var P,O;if(v(Q)){for(P=0;P<Q.length;P++){if(R.call(Q[P],P,Q[P])===false){return Q}}}else{for(O in Q){if(R.call(Q[O],O,Q[O])===false){return Q}}}return Q};z.fn={forEach:E.forEach,reduce:E.reduce,push:E.push,indexOf:E.indexOf,concat:E.concat,map:function(O){return z.map(this,function(Q,P){return O.call(Q,P,Q)})},slice:function(){return z(k.apply(this,arguments))},ready:function(O){if(p.test(e.readyState)){O(z)}else{e.addEventListener("DOMContentLoaded",function(){O(z)},false)}return this},get:function(O){return O===i?this:this[O]},size:function(){return this.length},remove:function(){return this.each(function(){if(this.parentNode!=null){this.parentNode.removeChild(this)}})},each:function(O){this.forEach(function(Q,P){O.call(Q,P,Q)});return this},filter:function(O){return z([].filter.call(this,function(P){return P.parentNode&&K(P.parentNode,O).indexOf(P)>=0}))},end:function(){return this.prevObject||z()},andSelf:function(){return this.add(this.prevObject||z())},add:function(O,P){return z(H(this.concat(z(O,P))))},is:function(O){return this.length>0&&z(this[0]).filter(O).length>0},not:function(O){var P=[];if(x(O)&&O.call!==i){this.each(function(R){if(!O.call(this,R)){P.push(this)}})}else{var Q=typeof O=="string"?this.filter(O):(v(O)&&x(O.item))?k.call(O):z(O);this.forEach(function(R){if(Q.indexOf(R)<0){P.push(R)}})}return z(P)},eq:function(O){return O===-1?this.slice(O):this.slice(O,+O+1)},first:function(){var O=this[0];return O&&!u(O)?O:z(O)},last:function(){var O=this[this.length-1];return O&&!u(O)?O:z(O)},find:function(P){var O;if(this.length==1){O=K(this[0],P)}else{O=this.map(function(){return K(this,P)})}return z(O)},closest:function(O,P){var Q=this[0],R=K(P||e,O);if(!R.length){Q=null}while(Q&&R.indexOf(Q)<0){Q=Q!==P&&Q!==e&&Q.parentNode}return z(Q)},parents:function(O){var Q=[],P=this;while(P.length>0){P=z.map(P,function(R){if((R=R.parentNode)&&R!==e&&Q.indexOf(R)<0){Q.push(R);return R}})}return t(Q,O)},parent:function(O){return t(H(this.pluck("parentNode")),O)},children:function(O){return t(this.map(function(){return k.call(this.children)}),O)},siblings:function(O){return t(this.map(function(P,Q){return k.call(Q.parentNode.children).filter(function(R){return R!==Q})}),O)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(O){return this.map(function(){return this[O]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null);if(l(this,"").getPropertyValue("display")=="none"){this.style.display=J(this.nodeName)}})},replaceWith:function(O){return this.each(function(){z(this).before(O).remove()})},wrap:function(O){return this.each(function(){z(this).wrapAll(z(O)[0].cloneNode(false))})},wrapAll:function(O){if(this[0]){z(this[0]).before(O=z(O));O.append(this)}return this},unwrap:function(){this.parent().each(function(){z(this).replaceWith(z(this).children())});return this},hide:function(){return this.css("display","none")},toggle:function(O){return(O===i?this.css("display")=="none":O)?this.show():this.hide()},prev:function(){return z(this.pluck("previousElementSibling"))},next:function(){return z(this.pluck("nextElementSibling"))},html:function(O){return O===i?(this.length>0?this[0].innerHTML:null):this.each(function(P){var Q=this.innerHTML;z(this).empty().append(m(this,O,P,Q))})},text:function(O){return O===i?(this.length>0?this[0].textContent:null):this.each(function(){this.textContent=O})},attr:function(O,Q){var P;return(typeof O=="string"&&Q===i)?(this.length==0?i:(O=="value"&&this[0].nodeName=="INPUT")?this.val():(!(P=this[0].getAttribute(O))&&O in this[0])?this[0][O]:P):this.each(function(R){if(u(O)){for(n in O){this.setAttribute(n,O[n])}}else{this.setAttribute(O,m(this,Q,R,this.getAttribute(O)))}})},removeAttr:function(O){return this.each(function(){this.removeAttribute(O)})},data:function(O,P){return this.attr("data-"+O,P)},val:function(O){return(O===i)?(this.length>0?this[0].value:null):this.each(function(P){this.value=m(this,O,P,this.value)})},offset:function(){if(this.length==0){return null}var O=this[0].getBoundingClientRect();return{left:O.left+window.pageXOffset,top:O.top+window.pageYOffset,width:O.width,height:O.height}},css:function(Q,P){if(P===i&&typeof Q=="string"){return(this.length==0?i:this[0].style[L(Q)]||l(this[0],"").getPropertyValue(Q))}var O="";for(n in Q){O+=j(n)+":"+f(n,Q[n])+";"}if(typeof Q=="string"){O=j(Q)+":"+f(Q,P)}return this.each(function(){this.style.cssText+=";"+O})},index:function(O){return O?this.indexOf(z(O)[0]):this.parent().children().indexOf(this[0])},hasClass:function(O){if(this.length<1){return false}else{return I(O).test(this[0].className)}},addClass:function(O){return this.each(function(P){a=[];var R=this.className,Q=m(this,O,P,R);Q.split(/\s+/g).forEach(function(S){if(!z(this).hasClass(S)){a.push(S)}},this);a.length&&(this.className+=(R?" ":"")+a.join(" "))})},removeClass:function(O){return this.each(function(P){if(O===i){return this.className=""}a=this.className;m(this,O,P,a).split(/\s+/g).forEach(function(Q){a=a.replace(I(Q)," ")});this.className=a.trim()})},toggleClass:function(P,O){return this.each(function(Q){var R=m(this,P,Q,this.className);(O===i?!z(this).hasClass(R):O)?z(this).addClass(R):z(this).removeClass(R)})}};"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings".split(",").forEach(function(P){var O=z.fn[P];z.fn[P]=function(){var Q=O.apply(this,arguments);Q.prevObject=this;return Q}});["width","height"].forEach(function(O){z.fn[O]=function(P){var R,Q=O.replace(/./,function(S){return S[0].toUpperCase()});if(P===i){return this[0]==window?window["inner"+Q]:this[0]==e?e.documentElement["offset"+Q]:(R=this.offset())&&R[O]}else{return this.each(function(S){var T=z(this);T.css(O,m(this,P,S,T[O]()))})}}});function h(O,R,Q){var P=(O%2)?R:R.parentNode;P&&P.insertBefore(Q,!O?R.nextSibling:O==1?P.firstChild:O==2?R:null)}function c(Q,O){O(Q);for(var P in Q.childNodes){c(Q.childNodes[P],O)}}s.forEach(function(Q,P){z.fn[Q]=function(T){var R=u(T)?T:d(T);if(!("length" in R)||R.nodeType){R=[R]}if(R.length<1){return this}var S=this.length,U=S>1,V=P<2;return this.each(function(W,Z){for(var X=0;X<R.length;X++){var Y=R[V?R.length-X-1:X];c(Y,function(aa){if(aa.nodeName!=null&&aa.nodeName.toUpperCase()==="SCRIPT"&&(!aa.type||aa.type==="text/javascript")){window["eval"].call(window,aa.innerHTML)}});if(U&&W<S-1){Y=Y.cloneNode(true)}h(P,Z,Y)}})};var O=(P%2)?Q+"To":"insert"+(P?"Before":"After");z.fn[O]=function(R){z(R)[Q](this);return this}});b.prototype=z.fn;return z})();window.Zepto=Zepto;"$" in window||(window.$=Zepto);(function(h){var o=h.qsa,b={},n=1,q={};q.click=q.mousedown=q.mouseup=q.mousemove="MouseEvents";function l(r){return r._zid||(r._zid=n++)}function c(s,u,t,r){u=e(u);if(u.ns){var v=k(u.ns)}return(b[l(s)]||[]).filter(function(w){return w&&(!u.e||w.e==u.e)&&(!u.ns||v.test(w.ns))&&(!t||w.fn==t)&&(!r||w.sel==r)})}function e(r){var s=(""+r).split(".");return{e:s[0],ns:s.slice(1).sort().join(" ")}}function k(r){return new RegExp("(?:^| )"+r.replace(" "," .* ?")+"(?: |$)")}function m(r,t,s){if(h.isObject(r)){h.each(r,s)}else{r.split(/\s/).forEach(function(u){s(u,t)})}}function p(u,t,v,s,r){var x=l(u),w=(b[x]||(b[x]=[]));m(t,v,function(B,A){var z=r&&r(A,B),D=z||A;var C=function(F){var E=D.apply(u,[F].concat(F.data));if(E===false){F.preventDefault()}return E};var y=h.extend(e(B),{fn:A,proxy:C,sel:s,del:z,i:w.length});w.push(y);u.addEventListener(y.e,C,false)})}function g(t,s,u,r){var v=l(t);m(s||"",u,function(x,w){c(t,x,w,r).forEach(function(y){delete b[v][y.i];t.removeEventListener(y.e,y.proxy,false)})})}h.event={add:p,remove:g};h.fn.bind=function(r,s){return this.each(function(){p(this,r,s)})};h.fn.unbind=function(r,s){return this.each(function(){g(this,r,s)})};h.fn.one=function(r,s){return this.each(function(u,t){p(this,r,s,null,function(w,v){return function(){var x=w.apply(t,arguments);g(t,v,w);return x}})})};var d=function(){return true},a=function(){return false},j={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function i(s){var r=h.extend({originalEvent:s},s);h.each(j,function(u,t){r[u]=function(){this[t]=d;return s[u].apply(s,arguments)};r[t]=a});return r}function f(s){if(!("defaultPrevented" in s)){s.defaultPrevented=false;var r=s.preventDefault;s.preventDefault=function(){this.defaultPrevented=true;r.call(this)}}}h.fn.delegate=function(r,s,t){return this.each(function(v,u){p(u,s,t,r,function(w){return function(z){var x,y=h(z.target).closest(r,u).get(0);if(y){x=h.extend(i(z),{currentTarget:y,liveFired:u});return w.apply(y,[x].concat([].slice.call(arguments,1)))}}})})};h.fn.undelegate=function(r,s,t){return this.each(function(){g(this,s,t,r)})};h.fn.live=function(r,s){h(document.body).delegate(this.selector,r,s);return this};h.fn.die=function(r,s){h(document.body).undelegate(this.selector,r,s);return this};h.fn.on=function(s,r,t){return r===undefined||h.isFunction(r)?this.bind(s,r):this.delegate(r,s,t)};h.fn.off=function(s,r,t){return r===undefined||h.isFunction(r)?this.unbind(s,r):this.undelegate(r,s,t)};h.fn.trigger=function(r,s){if(typeof r=="string"){r=h.Event(r)}f(r);r.data=s;return this.each(function(){this.dispatchEvent(r)})};h.fn.triggerHandler=function(s,t){var u,r;this.each(function(w,v){u=i(typeof s=="string"?h.Event(s):s);u.data=t;u.target=v;h.each(c(v,s.type||s),function(x,y){r=y.proxy(u);if(u.isImmediatePropagationStopped()){return false}})});return r};("focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error").split(" ").forEach(function(r){h.fn[r]=function(s){return this.bind(r,s)}});["focus","blur"].forEach(function(r){h.fn[r]=function(t){if(t){this.bind(r,t)}else{if(this.length){try{this.get(0)[r]()}catch(s){}}}return this}});h.Event=function(u,t){var v=document.createEvent(q[u]||"Events"),r=true;if(t){for(var s in t){(s=="bubbles")?(r=!!t[s]):(v[s]=t[s])}}v.initEvent(u,r,true,null,null,null,null,null,null,null,null,null,null,null,null);return v}})(Zepto);(function(f){var g={},c;function a(h){return"tagName" in h?h:h.parentNode}function b(i,h,k,j){var m=Math.abs(i-h),l=Math.abs(k-j);if(m>=l){return(i-h>0?"Left":"Right")}else{return(k-j>0?"Up":"Down")}}var e=750;function d(){if(g.last&&(Date.now()-g.last>=e)){g.el.trigger("longTap");g={}}}f(document).ready(function(){f(document.body).bind("touchstart",function(i){var h=Date.now(),j=h-(g.last||h);g.el=f(a(i.touches[0].target));c&&clearTimeout(c);g.x1=i.touches[0].pageX;g.y1=i.touches[0].pageY;if(j>0&&j<=250){g.isDoubleTap=true}g.last=h;setTimeout(d,e)}).bind("touchmove",function(h){g.x2=h.touches[0].pageX;g.y2=h.touches[0].pageY}).bind("touchend",function(h){if(g.isDoubleTap){g.el.trigger("doubleTap");g={}}else{if(g.x2>0||g.y2>0){(Math.abs(g.x1-g.x2)>30||Math.abs(g.y1-g.y2)>30)&&g.el.trigger("swipe")&&g.el.trigger("swipe"+(b(g.x1,g.x2,g.y1,g.y2)));g.x1=g.x2=g.y1=g.y2=g.last=0}else{if("last" in g){g.el.trigger("tap");c=setTimeout(function(){c=null;g.el.trigger("singleTap");g={}},250)}}}}).bind("touchcancel",function(){g={}})});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(h){f.fn[h]=function(i){return this.bind(h,i)}})})(Zepto);(function(e,c){var g="",j,b,h,l={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},i=window.document,d=i.createElement("div"),k=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function a(m){return m.toLowerCase()}function f(m){return j?j+m:a(m)}e.each(l,function(n,m){if(d.style[n+"TransitionProperty"]!==c){g="-"+a(n)+"-";j=m;return false}});e.fx={off:(j===c&&d.style.transitionProperty===c),cssPrefix:g,transitionEnd:f("TransitionEnd"),animationEnd:f("AnimationEnd")};e.fn.animate=function(m,n,o,p){if(e.isObject(n)){o=n.easing,p=n.complete,n=n.duration}if(n){n=n/1000}return this.anim(m,n,o,p)};e.fn.anim=function(r,o,n,t){var q,v={},s,p=this,m,u=e.fx.transitionEnd;if(o===c){o=0.4}if(e.fx.off){o=0}if(typeof r=="string"){v[g+"animation-name"]=r;v[g+"animation-duration"]=o+"s";u=e.fx.animationEnd}else{for(s in r){if(k.test(s)){q||(q=[]);q.push(s+"("+r[s]+")")}else{v[s]=r[s]}}if(q){v[g+"transform"]=q.join(" ")}if(!e.fx.off){v[g+"transition"]="all "+o+"s "+(n||"")}}m=function(){var w={};w[g+"transition"]=w[g+"animation-name"]="none";e(this).css(w);t&&t.call(this)};if(o>0){this.one(u,m)}setTimeout(function(){p.css(v);if(o<=0){setTimeout(function(){p.each(function(){m.call(this)})},0)}},0);return this};d=null})(Zepto);(function(g,b){var k=window.document,a=k.documentElement,c=g.fn.show,l=g.fn.hide,i=g.fn.toggle,e={_default:400,fast:200,slow:600};function j(m){return typeof m=="number"?m:(e[m]||e._default)}function d(o,p,m,q,r){if(typeof p=="function"&&!r){r=p,p=b}var n={opacity:m};if(q){if(g.fx.transforms3d){n.scale3d=q+",1"}else{n.scale=q}o.css(g.fx.cssPrefix+"transform-origin","0 0")}return o.anim(n,j(p)/1000,null,r)}function h(m,n,o,p){return d(m,n,0,o,function(){l.call(g(this));p&&p.call(this)})}g.fn.show=function(m,n){c.call(this);if(m===b){m=0}else{this.css("opacity",0)}return d(this,m,1,"1,1",n)};g.fn.hide=function(m,n){if(m===b){return l.call(this)}else{return h(this,m,"0,0",n)}};g.fn.toggle=function(m,n){if(m===b||typeof m=="boolean"){return i.call(this,m)}else{return this[this.css("display")=="none"?"show":"hide"](m,n)}};g.fn.fadeTo=function(n,m,o){return d(this,n,m,null,o)};g.fn.fadeIn=function(m,o){var n=this.css("opacity");if(n>0){this.css("opacity",0)}else{n=1}return c.call(this).fadeTo(m,n,o)};g.fn.fadeOut=function(m,n){return h(this,m,null,n)};g.fn.fadeToggle=function(n,o){var m=this.css("opacity")==0||this.css("display")=="none";return this[m?"fadeIn":"fadeOut"](n,o)};g.extend(g.fx,{speeds:e,transforms3d:(function(n){var m=false;g.each(n,function(o,p){if(a.style[p]!==b){m=o!=1||f();return false}});return m})("perspectiveProperty WebkitPerspective MozPerspective OPerspective msPerspective".split(" "))});function f(){var m,q=k.createElement("div"),p=k.createElement("div"),n="@media (-webkit-transform-3d){#zeptotest{left:9px;position:absolute}}",o=["&shy;","<style>",n,"</style>"].join("");q.innerHTML+=o;p.id="zeptotest";q.appendChild(p);a.appendChild(q);m=p.offsetLeft===9;q.parentNode.removeChild(q);return m}})(Zepto);(function(c){var b={inEffect:{opacity:"show"},inEffectDuration:500,stayTime:5000,text:"",sticky:false,type:"notice",position:"top-right",closeText:"",close:null};var a={init:function(d){if(d){c.extend(b,d)}},showToast:function(f){var g={};c.extend(g,b,f);var j,e,d,i,h;j=(!c(".toast-container").length)?c("<div></div>").addClass("toast-container").addClass("toast-position-"+g.position).appendTo("body"):c(".toast-container");e=c("<div></div>").addClass("toast-item-wrapper");d=c("<div></div>").hide().addClass("toast-item toast-type-"+g.type).html(c("<p>").append(g.text)).show(g.inEffectDuration).wrap(e);j.html(d);if(navigator.userAgent.match(/MSIE 6/i)){j.css({top:document.documentElement.scrollTop})}if(!g.sticky){setTimeout(function(){c().toastmessage("removeToast",d,g)},g.stayTime)}return d},showNoticeToast:function(e){var d={text:e,type:"notice"};return c().toastmessage("showToast",d)},showSuccessToast:function(e){var d={text:e,type:"success"};return c().toastmessage("showToast",d)},showErrorToast:function(e){var d={text:e,type:"error"};return c().toastmessage("showToast",d)},showWarningToast:function(e){var d={text:e,type:"warning"};return c().toastmessage("showToast",d)},removeToast:function(e,d){e.fadeTo(600,0,function(){e.parent().fadeTo(300,0,function(){e.parent().remove()})});if(d&&d.close!==null){d.close()}}};c.fn.toastmessage=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{c.error("Method "+d+" does not exist on jQuery.toastmessage")}}}})(Zepto);(function(a){a.fn.mailcheck=function(e,g){var f=["cosmosinteractive.com","yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com"];var d=["co.uk","com","net","org","info","edu","gov","mil"];if(typeof e==="object"&&g===undefined){e.domains=e.domains||f}else{var c=e;e=g;e.domains=c||f}e.topLevelDomains=e.topLevelDomains||d;e.distanceFunction=Kicksend.sift3Distance;var b=Kicksend.mailcheck.suggest(encodeURI(this.val()),e.domains,e.topLevelDomains,e.distanceFunction);if(b){if(e.suggested){e.suggested(this,b)}}else{if(e.empty){e.empty(this)}}}})($);var Kicksend={mailcheck:{threshold:3,suggest:function(f,c,g,e){f=f.toLowerCase();var b=this.splitEmail(f);var d=this.findClosestDomain(b.domain,c,e);if(d){if(d!=b.domain){return{address:b.address,domain:d,full:b.address+"@"+d}}}else{var a=this.findClosestDomain(b.topLevelDomain,g);if(b.domain&&a&&a!=b.topLevelDomain){var h=b.domain;d=h.substring(0,h.lastIndexOf(b.topLevelDomain))+a;return{address:b.address,domain:d,full:b.address+"@"+d}}}return false},findClosestDomain:function(f,a,c){var g;var d=99;var b=null;if(!f||!a){return false}if(!c){c=this.sift3Distance}for(var e=0;e<a.length;e++){if(f===a[e]){return f}g=c(f,a[e]);if(g<d){d=g;b=a[e]}}if(d<=this.threshold&&b!==null){return b}else{return false}},sift3Distance:function(f,b){if(f==null||f.length===0){if(b==null||b.length===0){return 0}else{return b.length}}if(b==null||b.length===0){return f.length}var j=0;var h=0;var g=0;var a=0;var e=5;while((j+h<f.length)&&(j+g<b.length)){if(f.charAt(j+h)==b.charAt(j+g)){a++}else{h=0;g=0;for(var d=0;d<e;d++){if((j+d<f.length)&&(f.charAt(j+d)==b.charAt(j))){h=d;break}if((j+d<b.length)&&(f.charAt(j)==b.charAt(j+d))){g=d;break}}}j++}return(f.length+b.length)/2-a},splitEmail:function(b){var e=b.split("@");if(e.length<2){return false}for(var c=0;c<e.length;c++){if(e[c]===""){return false}}var d=e.pop();var f=d.split(".");var a="";if(f.length==0){return false}else{if(f.length==1){a=f[0]}else{for(var c=1;c<f.length;c++){a+=f[c]+"."}if(f.length>=2){a=a.substring(0,a.length-1)}}}return{topLevelDomain:a,domain:d,address:e.join("@")}}}};$(document).ready(function(){$("#code").focus();showPage("redeem");var a=$("#email");var b=$("#hint");var c=$("#emailform");c.on("submit",function(){a.trigger("blur");return false});a.on("blur",function(){b.css("display","none");$(this).mailcheck({suggested:function(e,d){if(!b.html()){var d="Did you mean <span class='suggestion'><span class='address'>"+d.address+"</span>@<a href='#' class='domain'>"+d.domain+"</a></span>?";b.html(d).fadeIn(150)}else{$(".address").html(d.address);$(".domain").html(d.domain)}}})});b.on("click",".domain",function(){a.val($(".suggestion").text());b.fadeOut(200,function(){$(this).empty()});return false});$("#code").on("keyup",function(d){$(this).val($(this).val().toUpperCase())});$("#code").on("keydown",function(d){var f=$("#code").val().length;if(f>=12&&!(d.keyCode==8||d.keyCode==46)){d.preventDefault();return false}else{if(d.keyCode==32||d.keyCode==45||!(d.keyCode==8)&&!(d.keyCode==46)&&!(d.keyCode>=48&&d.keyCode<=57)&&!(d.keyCode>=65&&d.keyCode<=90)&&!(d.keyCode>=97&&d.keyCode<=122)){d.preventDefault();return false}}});if(typeof(AB)!=undefined){if($("#redeem").length!=0){AB.doCommand("//setSignOut/")}$("#redeem").click(function(){var d=$("#code").val();AB.doCommand("//redeem/?code="+d)});$("#cancelSignIn").click(function(){AB.doCommand("//cancelSignIn/")});$("#emailCode").click(function(){var d=$("#email").val();if(!isValidEmail(d)){showMessage("Invalid Email",false,"error",false);return false}AB.doCommand("//emailCode/?email="+d)});$("#signout").click(function(){AB.doCommand("//signout/")});$("#showOptions").on("click",function(){AB.doCommand("//showOptions/")});$(".showRedeem").click(function(){AB.doCommand("//showRedeem/")});$("#syncFeatures").click(function(){AB.doCommand("//syncFeatures/")});$("#facebook").click(function(){AB.doCommand("//facebook/")})}});function showPage(a){$('[id*="page"]').not("[id="+a+"-page]").removeClass("show").addClass("hide");$("[id="+a+"-page]").removeClass("hide").addClass("show")}function setProfile(a){$("#device_guid").text(a.device_guid);$("#device_guid").show();if(a.signed==="true"){$("#signout").show();$("#username").text(a.username);$("#username").show()}else{$("#signout").hide();$("#username").hide()}}function setEmail(a){$("#email").val(a)}function setCode(a){$("#code").val(a)}function isValidEmail(a){var b=/\S+@\S+\.\S+/;return b.test(a)}function showMessage(c,d,b,a){if(typeof(a)==="undefined"){a=false}$().toastmessage("showToast",{text:c,sticky:d,position:"middle-center",type:b,close:function(){if(a){AB.doCommand("//dismiss/")}}})};